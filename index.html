<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุงุฑูุช ุงููุงุจููุฉ - ุงูุทูุจ ุงูุณุฑูุน</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f0f2f5; }
        .navy-bg { background-color: #1e3a8a; } /* ุงูููู ุงููููู */
        .yellow-btn { background-color: #facc15; color: #1e3a8a; } /* ุงูููู ุงูุฃุตูุฑ */
        .item-card { border-right: 5px solid #facc15; transition: transform 0.2s; }
        .item-card:active { transform: scale(0.97); }
    </style>
</head>
<body class="pb-32">

    <header class="navy-bg text-white p-8 rounded-b-[40px] shadow-2xl text-center mb-8 border-b-4 border-yellow-400">
        <h1 class="text-4xl font-bold tracking-tight">๐ ูุงุฑูุช ุงููุงุจููุฉ</h1>
        <p class="text-yellow-400 mt-2 font-medium">ุชุณูู ุจุฐูุงุก.. ูุตูู ุฃูููุง ููุช</p>
    </header>

    <main class="max-w-md mx-auto px-4">
        <div id="loading-spinner" class="text-center py-10 text-blue-900 font-bold flex flex-col items-center gap-3">
            <div class="w-8 h-8 border-4 border-blue-900 border-t-yellow-400 rounded-full animate-spin"></div>
            ุฌุงุฑู ุชุญุฏูุซ ูุงุฆูุฉ ุงูููุชุฌุงุช...
        </div>

        <div id="products-container" class="space-y-4"></div>
    </main>

    <div id="floating-cart" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 w-[92%] max-w-md bg-blue-900 text-white p-4 rounded-2xl shadow-2xl flex justify-between items-center hidden z-50 border-t-4 border-yellow-400">
        <div class="flex items-center gap-3">
            <div class="bg-yellow-400 text-blue-900 min-w-[40px] h-10 rounded-full flex items-center justify-center font-bold shadow-inner">
                <span id="cart-count">0</span>
            </div>
            <div>
                <p class="text-xs text-yellow-300">ุฅุฌูุงูู ุงูุทูุจ:</p>
                <p class="font-bold text-lg leading-none"><span id="cart-total">0</span> ุฏ.ุน</p>
            </div>
        </div>
        <button onclick="sendOrderViaWhatsApp()" class="bg-yellow-400 hover:bg-yellow-300 text-blue-900 py-3 px-6 rounded-xl font-bold transition-all active:scale-95 shadow-md flex items-center gap-2">
            ุฅุฑุณุงู ุงูุทูุจ ๐ฒ
        </button>
    </div>

    <script>
        // ุฑุงุจุท ุฌุฏูู ุจูุงูุงุช ุฌูุฌู (Google Sheets) ุงูุฎุงุต ุจู
        const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR_Ja8kz5VAApLStZ9Y_erhYNqL3eXMafTSR9T8xkI82UzYQMS_efXuIyASXRKZTwYZGp69ExZB-7r3/pub?output=csv';

        // ุฏุงูุฉ ุฌูุจ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู
        async function loadProducts() {
            try {
                const response = await fetch(sheetURL);
                const csvData = await response.text();
                // ุชูุณูู ุงูุจูุงูุงุช ุฅูู ุฃุณุทุฑ ูุชุฌุงูู ุงูุตู ุงูุฃูู (ุงูุนูุงููู)
                const rows = csvData.split('\n').slice(1); 
                
                const products = rows.map(row => {
                    const columns = row.split(',');
                    // ุงูุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช ูู ุงูุณุทุฑ
                    if(columns.length >= 2) {
                        return { 
                            name: columns[0].replace(/"/g, '').trim(), 
                            price: columns[1].replace(/"/g, '').trim(), 
                            image: columns[2] ? columns[2].replace(/"/g, '').trim() : ''
                        };
                    }
                }).filter(p => p && p.name);

                renderProducts(products);
                document.getElementById('loading-spinner').classList.add('hidden');
            } catch (e) {
                document.getElementById('loading-spinner').innerHTML = "โ๏ธ ุนุฐุฑุงูุ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช.";
                console.error(e);
            }
        }

        // ุฏุงูุฉ ุนุฑุถ ุงูููุชุฌุงุช ูู ุงูุตูุญุฉ
        function renderProducts(items) {
            const container = document.getElementById('products-container');
            container.innerHTML = items.map(item => `
                <div class="bg-white
